Object.defineProperty(exports,"__esModule",{value:true});var _toast=require('antd-mobile/lib/toast');var _toast2=_interopRequireDefault(_toast);var _jsxFileName='src/Component/Content/OperationPanel/Operation/notes.js',_this=this;var _templateObject=_taggedTemplateLiteral(['\n    mutation academyNotes ($token: String!, $order: Int!, $text: String!, $title: String!) {\n        academyNotes (token: $token, order: $order, text: $text, title: $title) {\n            finish\n        }\n    }\n'],['\n    mutation academyNotes ($token: String!, $order: Int!, $text: String!, $title: String!) {\n        academyNotes (token: $token, order: $order, text: $text, title: $title) {\n            finish\n        }\n    }\n']);var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNative=require('react-native');var _reactRedux=require('react-redux');var _graphqlTag=require('graphql-tag');var _graphqlTag2=_interopRequireDefault(_graphqlTag);var _reactApollo=require('react-apollo');var _propTypes=require('prop-types');var _propTypes2=_interopRequireDefault(_propTypes);var _reactImmutableProptypes=require('react-immutable-proptypes');var _reactImmutableProptypes2=_interopRequireDefault(_reactImmutableProptypes);var _generateColor=require('../../../../Action/generateColor');var _generateColor2=_interopRequireDefault(_generateColor);var _generateSize=require('../../../../Action/generateSize');var _generateSize2=_interopRequireDefault(_generateSize);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}));}var academyNotes=(0,_graphqlTag2.default)(_templateObject);var _Dimensions$get=_reactNative.Dimensions.get('window'),width=_Dimensions$get.width,height=_Dimensions$get.height;var Notes=function Notes(_ref){var order=_ref.order,token=_ref.token,light=_ref.light,fontSize=_ref.fontSize,text=_ref.text,notes=_ref.notes,changeText=_ref.changeText,changeTitle=_ref.changeTitle,comfirm=_ref.comfirm,academyNotes=_ref.academyNotes;return _react2.default.createElement(_reactNative.KeyboardAvoidingView,{behavior:'padding',keyboardVerticalOffset:_reactNative.Platform.OS==='ios'?64:-500,__source:{fileName:_jsxFileName,lineNumber:33}},_react2.default.createElement(_reactNative.TouchableWithoutFeedback,{onPress:_reactNative.Keyboard.dismiss,__source:{fileName:_jsxFileName,lineNumber:34}},_react2.default.createElement(_reactNative.View,{style:[styles.main,{backgroundColor:'#'+(0,_generateColor2.default)(50,109,light)}],__source:{fileName:_jsxFileName,lineNumber:35}},_react2.default.createElement(_reactNative.ScrollView,{showsVerticalScrollIndicator:false,scrollEnabled:true,__source:{fileName:_jsxFileName,lineNumber:36}},_react2.default.createElement(_reactNative.Text,{style:[styles.content,{color:'#'+(0,_generateColor2.default)(166,216,light),fontSize:(0,_generateSize2.default)(fontSize,20)}],__source:{fileName:_jsxFileName,lineNumber:37}},' ',text,' '),_react2.default.createElement(_reactNative.TextInput,{value:notes.get('title'),onChangeText:function onChangeText(value){return changeTitle({value:value});},placeholder:'\u6807\u9898',style:[styles.title,{color:'#'+(0,_generateColor2.default)(50,109,light),fontSize:(0,_generateSize2.default)(fontSize,20),backgroundColor:'#'+(0,_generateColor2.default)(166,216,light)}],__source:{fileName:_jsxFileName,lineNumber:38}}),_react2.default.createElement(_reactNative.TextInput,{value:notes.get('text'),onChangeText:function onChangeText(value){return changeText({value:value});},placeholder:'\u5185\u5BB9',multiline:true,style:[styles.text,{color:'#'+(0,_generateColor2.default)(50,109,light),fontSize:(0,_generateSize2.default)(fontSize,20),backgroundColor:'#'+(0,_generateColor2.default)(166,216,light)}],__source:{fileName:_jsxFileName,lineNumber:39}}),_react2.default.createElement(_reactNative.View,{style:{height:30,flexDirection:'row',justifyContent:'space-between',marginTop:10},__source:{fileName:_jsxFileName,lineNumber:40}},_react2.default.createElement(_reactNative.TouchableOpacity,{onPress:comfirm({kind:'cancel'}),__source:{fileName:_jsxFileName,lineNumber:41}},_react2.default.createElement(_reactNative.View,{style:{height:30,width:50,backgroundColor:'#aaa',justifyContent:'center',alignItems:'center'},__source:{fileName:_jsxFileName,lineNumber:42}},_react2.default.createElement(_reactNative.Text,{style:{color:'#ededed',fontSize:14},__source:{fileName:_jsxFileName,lineNumber:43}},'\u53D6\u6D88'))),_react2.default.createElement(_reactNative.TouchableOpacity,{onPress:comfirm({kind:'complete',order:order,token:token,title:notes.get('title'),text:notes.get('text'),academyNotes:academyNotes}),__source:{fileName:_jsxFileName,lineNumber:48}},_react2.default.createElement(_reactNative.View,{style:{height:30,width:50,backgroundColor:'#aaa',justifyContent:'center',alignItems:'center'},__source:{fileName:_jsxFileName,lineNumber:49}},_react2.default.createElement(_reactNative.Text,{style:{color:'#ededed',fontSize:14},__source:{fileName:_jsxFileName,lineNumber:50}},'\u5B8C\u6210')))),_react2.default.createElement(_reactNative.View,{style:{height:30},__source:{fileName:_jsxFileName,lineNumber:56}})))));};Notes.propTypes={light:_propTypes2.default.number.isRequired,fontSize:_propTypes2.default.string.isRequired,text:_propTypes2.default.string.isRequired,notes:_reactImmutableProptypes2.default.map.isRequired,changeText:_propTypes2.default.func.isRequired,changeTitle:_propTypes2.default.func.isRequired,comfirm:_propTypes2.default.func.isRequired,order:_propTypes2.default.number.isRequired,token:_propTypes2.default.string.isRequired};var styles=_reactNative.StyleSheet.create({main:{width:width,height:height*0.835,backgroundColor:'#6d6d6d',zIndex:-10,alignItems:'center'},title:{width:width*0.9,height:50,backgroundColor:'#ededed',borderRadius:3,color:'#707070',marginTop:10,paddingLeft:10},text:{width:width*0.9,height:250,backgroundColor:'#ededed',borderRadius:3,color:'#707070',paddingLeft:10,marginTop:10,lineHeight:30},content:{width:width*0.9,borderRadius:10,fontSize:20,color:'#ededed',paddingLeft:10,marginTop:30,lineHeight:30}});var mapStateToProps=function mapStateToProps(state){return{order:Number.parseInt(state.getIn(['academy','order']),10),token:state.getIn(['me','我的信息','token']),fontSize:state.getIn(['pageSet','fontSize']),light:state.getIn(['pageSet','light']),text:state.getIn(['academy','content',state.getIn(['academy','order']),'text']),notes:state.getIn(['academy','content',state.getIn(['academy','order']),'operation','notes'])};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{changeText:function changeText(_ref2){var value=_ref2.value;return dispatch({type:'ACADEMY_NOTES_CHANGE_TEXT',notes:value});},changeTitle:function changeTitle(_ref3){var value=_ref3.value;return dispatch({type:'ACADEMY_NOTES_CHANGE_TITLE',title:value});},comfirm:function comfirm(_ref4){var kind=_ref4.kind,order=_ref4.order,title=_ref4.title,text=_ref4.text,token=_ref4.token,academyNotes=_ref4.academyNotes;return function _callee(){var response;return regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(kind==='complete')){_context.next=6;break;}console.log(kind,order,title,text,token);_context.next=4;return regeneratorRuntime.awrap(academyNotes({variables:{token:token,order:order,title:title,text:text}}));case 4:response=_context.sent;if(response.data.academyNotes.finish){_toast2.default.success('添加笔记成功！');}else{_toast2.default.fail('添加笔记失败！');}case 6:dispatch({type:'BACK'});case 7:case'end':return _context.stop();}}},null,_this);};}};};exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)((0,_reactApollo.graphql)(academyNotes,{name:'academyNotes'})(Notes));