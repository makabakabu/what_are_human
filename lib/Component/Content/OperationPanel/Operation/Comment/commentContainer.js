Object.defineProperty(exports,"__esModule",{value:true});var _jsxFileName='src/Component/Content/OperationPanel/Operation/Comment/commentContainer.js',_this=this;var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNative=require('react-native');var _immutable=require('immutable');var _uuid=require('uuid');var _uuid2=_interopRequireDefault(_uuid);var _propTypes=require('prop-types');var _propTypes2=_interopRequireDefault(_propTypes);var _reactImmutableProptypes=require('react-immutable-proptypes');var _reactImmutableProptypes2=_interopRequireDefault(_reactImmutableProptypes);var _reactNativeCollapsible=require('react-native-collapsible');var _reactNativeCollapsible2=_interopRequireDefault(_reactNativeCollapsible);var _reactRedux=require('react-redux');var _operationTrigger=require('../../operationTrigger');var _operationTrigger2=_interopRequireDefault(_operationTrigger);var _recomment=require('./recomment');var _recomment2=_interopRequireDefault(_recomment);var _generateSize=require('../../../../../Action/generateSize');var _generateSize2=_interopRequireDefault(_generateSize);var _generateColor=require('../../../../../Action/generateColor');var _generateColor2=_interopRequireDefault(_generateColor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var _Dimensions$get=_reactNative.Dimensions.get('window'),width=_Dimensions$get.width;var commentContainer=function commentContainer(_ref){var likeId=_ref.likeId,light=_ref.light,fontSize=_ref.fontSize,content=_ref.content,commentId=_ref.commentId,likePress=_ref.likePress,commentPress=_ref.commentPress,likeImageSource=_ref.likeImageSource,portraitImageSource=_ref.portraitImageSource;return _react2.default.createElement(_reactNative.View,{style:styles.main,__source:{fileName:_jsxFileName,lineNumber:23}},_react2.default.createElement(_reactNative.View,{style:styles.logo,__source:{fileName:_jsxFileName,lineNumber:24}},_react2.default.createElement(_reactNative.Image,{style:{width:30,height:40},source:portraitImageSource,__source:{fileName:_jsxFileName,lineNumber:25}})),_react2.default.createElement(_reactNative.View,{style:{flexDirection:'column'},__source:{fileName:_jsxFileName,lineNumber:27}},_react2.default.createElement(_reactNative.View,{style:{flexDirection:'row',justifyContent:'space-between',alignItems:'center'},__source:{fileName:_jsxFileName,lineNumber:28}},_react2.default.createElement(_reactNative.Text,{style:{color:'#aaa'},__source:{fileName:_jsxFileName,lineNumber:29}},content.get('userName')),_react2.default.createElement(_reactNative.View,{style:{flexDirection:'row',alignItems:'center',justifyContent:'space-between',width:width*0.2,height:20},__source:{fileName:_jsxFileName,lineNumber:30}},_react2.default.createElement(_operationTrigger2.default,{imageSource:likeImageSource,number:content.getIn(['like','number']).toString(),likeId:likeId,press:likePress({likeId:likeId,location:(0,_immutable.Map)({viewMode:'commentLike',commentId:commentId})}),__source:{fileName:_jsxFileName,lineNumber:31}}),_react2.default.createElement(_operationTrigger2.default,{imageSource:require('../../../../../Image/Operation/comment.png'),number:content.get('recomment').size.toString(),press:commentPress({location:(0,_immutable.Map)({viewMode:'comment',text:'',commentId:commentId,recommentId:''})}),__source:{fileName:_jsxFileName,lineNumber:43}}))),_react2.default.createElement(_reactNative.Text,{style:{color:'#aaa'},__source:{fileName:_jsxFileName,lineNumber:57}},content.get('time'),' '),_react2.default.createElement(_reactNative.Text,{style:{fontSize:(0,_generateSize2.default)(fontSize,18),color:'#'+(0,_generateColor2.default)(166,216,light),marginBottom:10,marginTop:5},__source:{fileName:_jsxFileName,lineNumber:58}},content.get('text')),_react2.default.createElement(_reactNativeCollapsible2.default,{collapsed:!content.get('visibility'),__source:{fileName:_jsxFileName,lineNumber:59}},_react2.default.createElement(_reactNative.FlatList,{data:content.get('recomment').map(function(value,key){return{key:key,value:value};}).valueSeq().toArray(),renderItem:function renderItem(_ref2){var item=_ref2.item;return _react2.default.createElement(_recomment2.default,{key:(0,_uuid2.default)(),content:item.value,commentId:commentId,recommentId:item.key,contentUserName:content.get('userName'),__source:{fileName:_jsxFileName,lineNumber:63}});},__source:{fileName:_jsxFileName,lineNumber:60}})),_react2.default.createElement(_reactNative.View,{style:{height:1,width:0.6*width,backgroundColor:'#aaa'},__source:{fileName:_jsxFileName,lineNumber:66}})));};commentContainer.propTypes={likeId:_propTypes2.default.string.isRequired,portraitImageSource:_propTypes2.default.number.isRequired,light:_propTypes2.default.number.isRequired,fontSize:_propTypes2.default.string.isRequired,content:_reactImmutableProptypes2.default.map.isRequired,commentId:_propTypes2.default.string.isRequired,likeImageSource:_propTypes2.default.number.isRequired,likePress:_propTypes2.default.func.isRequired,commentPress:_propTypes2.default.func.isRequired};var styles=_reactNative.StyleSheet.create({main:{width:0.8*width,flexDirection:'row',marginTop:10},logo:{width:0.25*width,height:50,alignItems:'center',justifyContent:'center'}});var mapStateToProps=function mapStateToProps(state,ownProps){return{likeId:(0,_uuid2.default)(),portraitImageSource:ownProps.content.get('gender')==='male'?require('../../../../../Image/Menu/male.png'):require('../../../../../Image/Menu/female.png'),likeImageSource:ownProps.content.getIn(['like','clicked'])?require('../../../../../Image/Operation/likeAfter.png'):require('../../../../../Image/Operation/like.png'),light:state.getIn(['pageSet','light']),fontSize:state.getIn(['pageSet','fontSize'])};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{commentPress:function commentPress(_ref3){var location=_ref3.location;return function(){return dispatch({type:'OPERATION_COMMENT_PRESS',location:location});};},likePress:function likePress(_ref4){var location=_ref4.location,likeId=_ref4.likeId;return function(){_this[likeId].swing(800);dispatch({type:'OPERATION_LIKE_PRESS',location:location});dispatch({type:'ME_ADD',viewMode:'我的点赞',location:location});};}};};exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(commentContainer);